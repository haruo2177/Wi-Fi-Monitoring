# UI/UX設計・インタラクティブ機能（2025年8月3日作成）

## インタラクティブUI設計

### InfoTooltip コンポーネント

包括的なヘルプシステムを提供するカスタムツールチップ：

```jsx
const InfoTooltip = ({ icon: Icon, title, description, calculation, color = '#fff' }) => {
  // アイコン + タイトル + HelpCircleアイコン
  // マウスオーバーで詳細ツールチップ表示
}
```

#### 構成要素
- **アイコン**: 監視項目を視覚的に表現（Globe, Router, Wifi, Clock等）
- **タイトル**: 機能名（「接続状態」「ルーター応答」等）
- **HelpCircleアイコン**: クリック可能なヘルプインジケーター
- **詳細説明**: 技術的な意味・重要性の解説
- **計算方法**: 測定手法・判定基準の詳細

#### 視覚的効果
- **マウスオーバー**: opacity変化によるフィードバック
- **ツールチップアニメーション**: fadeIn効果（0.2s ease-out）
- **位置調整**: absolute positioning + z-index 1000
- **レスポンシブ幅**: minWidth 280px〜maxWidth 420px

### 状態インジケーターシステム

ネットワーク状態を直感的に表示：

#### カラーコード
- **🟢 正常 (status-good)**: 緑 - 良好な接続状態
- **🟡 注意 (status-warning)**: 黄 - 性能低下・注意が必要
- **🔴 警告 (status-error)**: 赤 - 問題あり・対応が必要

#### 判定基準
- **接続状態**: ConnectionType + パケットロス率で総合判定
- **ルーター応答**: 5ms以下（良好）〜20ms以下（注意）〜それ以上（警告）
- **外部接続**: 20ms以下（良好）〜50ms以下（注意）〜それ以上（警告）  
- **Wi-Fi信号**: -50dBm以上（良好）〜-70dBm以上（注意）〜それ以下（警告）

## 異常値分析UI

### カテゴリ別アイコンシステム

| カテゴリ | アイコン | 色 | 検出条件 |
|---------|---------|----| ---------|
| 接続エラー | WifiOff | 赤 | TransmitRate=0 かつ ExternalLoss=100% |
| 高レイテンシ | Clock | オレンジ | Ping > Q3+1.5×IQR |
| パケットロス | Zap | 黄 | Loss% > 0 |
| 信号異常 | Signal | 紫 | Signal < -70dBm または > -30dBm |

### 統計的可視化

#### 散布図 (ScatterChart)
- **X軸**: Ping応答時間（ms）
- **Y軸**: Wi-Fi信号強度（dBm）
- **色分け**: 正常値（青）vs 異常値（赤）
- **相関分析**: 信号強度と応答時間の関係性

#### 統計情報表示
- **平均値**: データの中央傾向
- **中央値**: 外れ値の影響を受けにくい代表値
- **四分位数**: Q1（25%）、Q3（75%）
- **異常範囲**: Q1-1.5×IQR 〜 Q3+1.5×IQR の境界値

### 異常度スコアシステム

```
スコア = (異常値件数 ÷ 総データ件数) × 100

レベル判定:
- 0-20:   正常（緑）
- 21-50:  注意（黄）  
- 51-80:  警告（オレンジ）
- 81-100: 重大（赤）
```

## データ可視化デザイン

### 時系列グラフ（LineChart）

#### カスタムTooltip
```jsx
const CustomTooltip = ({ active, payload, label }) => {
  // ダークテーマ対応
  // 複数データ系列の統一表示
  // 単位の自動付与（ms, %, dBm, Mbps）
}
```

#### 軸設定・ラベル
- **X軸**: 時間範囲により自動調整（24h: 水平、7d/30d: -45度傾斜）
- **Y軸**: 左側メイン軸 + 右側セカンダリ軸（Wi-Fi信号＋転送レート）
- **グリッド**: strokeDasharray="3 3" によるダッシュライン
- **色**: ダークテーマに適した色パレット

### レスポンシブ対応

#### コンテナ設計
- **ResponsiveContainer**: 100%幅での自動調整
- **高さ固定**: 300px（視認性とスクロール回避のバランス）
- **グリッドレイアウト**: monitoring-grid による4カラム表示

#### モバイル対応
- **フォントサイズ**: 11-12px（可読性確保）
- **タップ領域**: 十分なサイズのボタン・インタラクション要素
- **スクロール**: 縦スクロールでの情報アクセス

## ダークテーマ設計

### カラーパレット
- **背景**: #333（メイン）、#444（グリッド）、#555（ボーダー）
- **テキスト**: #fff（メイン）、#ccc（軸）、#999（ヘルプ）、#e0e0e0（説明）
- **アクセント**: 各データ系列に対応した視認性の高い色

### 視認性最適化
- **コントラスト**: WCAG準拠の色差確保
- **ホバー効果**: opacity・transition による滑らかな変化
- **フォーカス**: キーボードナビゲーション対応

## ナビゲーション・UX

### 時間範囲切り替え
- **ボタングループ**: 24時間/7日間/30日間
- **アクティブ状態**: primary クラスによる視覚的フィードバック
- **即座反映**: クリック時の非同期データ取得

### エラーハンドリングUI
- **データ未取得時**: AlertCircle + 説明文 + 再読み込みボタン
- **ローディング状態**: 「データを読み込み中...」メッセージ
- **デバッグ情報**: データ件数・最新データ時刻の表示

## アクセシビリティ考慮

### キーボードナビゲーション
- **ツールチップ**: フォーカス時の表示対応
- **ボタン**: Tab順序の論理的配置
- **ARIA属性**: スクリーンリーダー対応

### 色覚バリアフリー
- **形状・アイコン**: 色以外の識別手段
- **コントラスト**: 十分な色差の確保
- **パターン**: 線種・ハッチングによる区別